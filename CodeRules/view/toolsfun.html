<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ä»£ç è§„èŒƒ</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="../css/doc.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/shCore.css">
</head>

<body>
  <div class="wrapper">
    <div id="J_menu" class="sdmenu">
      <div class="list">
        <span class="tit">æ•°ç»„</span>
        <section class="con">
          <h4>1. <code>all</code>ï¼šå¸ƒå°”å…¨ç­‰åˆ¤æ–­</h4>
          <pre class="language-javscript">
            const all = (arr, fn = Boolean) => arr.every(fn);

            all([4, 2, 3], x => x > 1); // true
            all([1, 2, 3]); // true
          </pre>
          <h4>2. <code>allEqual</code>ï¼šæ£€æŸ¥æ•°ç»„å„é¡¹ç›¸ç­‰</h4>
          <pre class="language-javscript">
            const allEqual = arr => arr.every(val => val === arr[0]);

            allEqual([1, 2, 3, 4, 5, 6]); // false
            allEqual([1, 1, 1, 1]); // true
          </pre>
          <h4>3. <code>approximatelyEqual</code>ï¼šçº¦ç­‰äº</h4>
          <pre class="language-javscript">
            const approximatelyEqual = (v1, v2, epsilon = 0.001) => Math.abs(v1 - v2) < epsilon;
            approximatelyEqual(Math.PI / 2.0, 1.5708); // true
          </pre>

          <h4>4. <code>arrayToCSV</code>ï¼šæ•°ç»„è½¬CSVæ ¼å¼ï¼ˆå¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼‰</h4>
          <pre class="language-javscript">
            const arrayToCSV = (arr, delimiter = ',') =>
            arr.map(v => v.map(x => `"${x}"`).join(delimiter)).join('\n');

            arrayToCSV([['a', 'b'], ['c', 'd']]); // '"a","b"\n"c","d"'
            arrayToCSV([['a', 'b'], ['c', 'd']], ';'); // '"a";"b"\n"c";"d"'
          </pre>

          <h4>5. <code>arrayToHtmlList</code>ï¼šæ•°ç»„è½¬liåˆ—è¡¨</h4>
          <pre class="language-javscript">
            const arrayToHtmlList = (arr, listID) =>
            (el => (
            (el = document.querySelector('#' + listID)),
            (el.innerHTML += arr.map(item => `<li>${item}</li>`).join(''))
            ))();

            arrayToHtmlList(['item 1', 'item 2'], 'myListID');
          </pre>

          <h4>6. <code>average</code>ï¼šå¹³å‡æ•°</h4>
          <pre class="language-javscript">
            const average = (...nums) => nums.reduce((acc, val) => acc + val, 0) / nums.length;
            average(...[1, 2, 3]); // 2
            average(1, 2, 3); // 2
          </pre>

          <h4>7. <code>averageBy</code>ï¼šæ•°ç»„å¯¹è±¡å±æ€§å¹³å‡æ•°</h4>
          <pre class="language-javscript">
            const averageBy = (arr, fn) =>
            arr.map(typeof fn === 'function' ? fn : val => val[fn]).reduce((acc, val) => acc + val, 0) /
            arr.length;

            averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], o => o.n); // 5
            averageBy([{ n: 4 }, { n: 2 }, { n: 8 }, { n: 6 }], 'n'); // 5
          </pre>

          <h4>8. <code>bifurcate</code>ï¼šæ‹†åˆ†æ–­è¨€åçš„æ•°ç»„</h4>
          <pre class="language-javscript">
            const bifurcate = (arr, filter) =>
            arr.reduce((acc, val, i) => (acc[filter[i] ? 0 : 1].push(val), acc), [[], []]);
            bifurcate(['beep', 'boop', 'foo', 'bar'], [true, true, false, true]); // [ ['beep', 'boop', 'bar'], ['foo'] ]
          </pre>

          <h4>9. <code>castArray</code>ï¼šå…¶å®ƒç±»å‹è½¬æ•°ç»„</h4>
          <pre class="language-javscript">
            const castArray = val => (Array.isArray(val) ? val : [val]);

            castArray('foo'); // ['foo']
            castArray([1]); // [1]
            castArray(1); // [1]
          </pre>
          <h4>10. <code>compact</code>ï¼šå»é™¤æ•°ç»„ä¸­çš„æ— æ•ˆ/æ— ç”¨å€¼</h4>
          <pre class="language-javscript">
            const countOccurrences = (arr, val) => arr.reduce((a, v) => (v === val ? a + 1 : a), 0);
            countOccurrences([1, 1, 2, 1, 2, 3], 1); // 3
          </pre>
          <h4>11. <code>countOccurrences</code>ï¼šæ£€æµ‹æ•°å€¼å‡ºç°æ¬¡æ•°</h4>
          <pre class="language-javscript">
            const countOccurrences = (arr, val) => arr.reduce((a, v) => (v === val ? a + 1 : a), 0);
            countOccurrences([1, 1, 2, 1, 2, 3], 1); // 3
          </pre>
          <h4>12. <code>deepFlatten</code>ï¼šé€’å½’æ‰å¹³åŒ–æ•°ç»„</h4>
          <pre class="language-javscript">
            const deepFlatten = arr => [].concat(...arr.map(v => (Array.isArray(v) ? deepFlatten(v) : v)));

            deepFlatten([1, [2], [[3], 4], 5]); // [1,2,3,4,5]
          </pre>
          <h4>13. <code>difference</code>ï¼šå¯»æ‰¾å·®å¼‚ï¼ˆå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ç‹¬æœ‰çš„ï¼‰</h4>
          <pre class="language-javscript">
            const difference = (a, b) => {
            const s = new Set(b);
            return a.filter(x => !s.has(x));
            };

            difference([1, 2, 3], [1, 2, 4]); // [3]
          </pre>
          <h4>14. <code>differenceBy</code>ï¼šå…ˆæ‰§è¡Œå†å¯»æ‰¾å·®å¼‚</h4>
          <pre class="language-javscript">
            const differenceBy = (a, b, fn) => {
            const s = new Set(b.map(fn));
            return a.filter(x => !s.has(fn(x)));
            };

            differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [1.2]
            differenceBy([{ x: 2 }, { x: 1 }], [{ x: 1 }], v => v.x); // [ { x: 2 } ]
          </pre>
          <h4>15. <code>dropWhile</code>ï¼šåˆ é™¤ä¸ç¬¦åˆæ¡ä»¶çš„å€¼</h4>
          <pre class="language-javscript">
            const dropWhile = (arr, func) => {
            while (arr.length > 0 && !func(arr[0])) arr = arr.slice(1);
            return arr;
            };

            dropWhile([1, 2, 3, 4], n => n >= 3); // [3,4]
          </pre>
          <h4>16. <code>flatten</code>ï¼šæŒ‡å®šæ·±åº¦æ‰å¹³åŒ–æ•°ç»„</h4>
          <pre class="language-javscript">
            const flatten = (arr, depth = 1) =>
            arr.reduce((a, v) => a.concat(depth > 1 && Array.isArray(v) ? flatten(v, depth - 1) : v), []);

            flatten([1, [2], 3, 4]); // [1, 2, 3, 4]
            flatten([1, [2, [3, [4, 5], 6], 7], 8], 2); // [1, 2, 3, [4, 5], 6, 7, 8]
          </pre>
          <h4>17. <code>indexOfAll</code>ï¼šè¿”å›æ•°ç»„ä¸­æŸå€¼çš„æ‰€æœ‰ç´¢å¼•</h4>
          <pre class="language-javscript">
            const indexOfAll = (arr, val) => arr.reduce((acc, el, i) => (el === val ? [...acc, i] : acc), []);

            indexOfAll([1, 2, 3, 1, 2, 3], 1); // [0,3]
            indexOfAll([1, 2, 3], 4); // []
          </pre>
          <h4>18. <code>intersection</code>ï¼šä¸¤æ•°ç»„çš„äº¤é›†</h4>
          <pre class="language-javscript">
            const intersection = (a, b) => {
            const s = new Set(b);
            return a.filter(x => s.has(x));
            };

            intersection([1, 2, 3], [4, 3, 2]); // [2, 3]
          </pre>
          <h4>19. <code>intersectionWith</code>ï¼šä¸¤æ•°ç»„éƒ½ç¬¦åˆæ¡ä»¶çš„äº¤é›†</h4>
          <pre class="language-javscript">
            const intersectionBy = (a, b, fn) => {
            const s = new Set(b.map(fn));
            return a.filter(x => s.has(fn(x)));
            };

            intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor); // [2.1]
          </pre>
          <h4>20. <code>intersectionWith</code>ï¼šå…ˆæ¯”è¾ƒåè¿”å›äº¤é›†</h4>
          <pre class="language-javscript">
            const intersectionWith = (a, b, comp) => a.filter(x => b.findIndex(y => comp(x, y)) !== -1);

            intersectionWith([1, 1.2, 1.5, 3, 0], [1.9, 3, 0, 3.9], (a, b) => Math.round(a) === Math.round(b)); // [1.5, 3, 0]
          </pre>
          <h4>21. <code>minN</code>ï¼šè¿”å›æŒ‡å®šé•¿åº¦çš„å‡åºæ•°ç»„</h4>
          <pre class="language-javscript">
            const minN = (arr, n = 1) => [...arr].sort((a, b) => a - b).slice(0, n);

            minN([1, 2, 3]); // [1]
            minN([1, 2, 3], 2); // [1,2]
          </pre>
          <h4>22. <code>negate</code>ï¼šæ ¹æ®æ¡ä»¶åå‘ç­›é€‰</h4>
          <pre class="language-javscript">
            const negate = func => (...args) => !func(...args);

            [1, 2, 3, 4, 5, 6].filter(negate(n => n % 2 === 0)); // [ 1, 3, 5 ]
          </pre>
          <h4>23. <code>randomIntArrayInRange</code>ï¼šç”Ÿæˆä¸¤æ•°ä¹‹é—´æŒ‡å®šé•¿åº¦çš„éšæœºæ•°ç»„</h4>
          <pre class="language-javscript">
            const randomIntArrayInRange = (min, max, n = 1) =>
            Array.from({ length: n }, () => Math.floor(Math.random() * (max - min + 1)) + min);

            randomIntArrayInRange(12, 35, 10); // [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]
          </pre>
          <h4>24. <code>sample</code>ï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–éšæœºæ•°</h4>
          <pre class="language-javscript">
            const sample = arr => arr[Math.floor(Math.random() * arr.length)];

            sample([3, 7, 9, 11]); // 9
          </pre>
          <h4>25. <code>sampleSize</code>ï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–æŒ‡å®šé•¿åº¦çš„éšæœºæ•°</h4>
          <pre class="language-javscript">
            const sampleSize = ([...arr], n = 1) => {
            let m = arr.length;
            while (m) {
            const i = Math.floor(Math.random() * m--);
            [arr[m], arr[i]] = [arr[i], arr[m]];
            }
            return arr.slice(0, n);
            };

            sampleSize([1, 2, 3], 2); // [3,1]
            sampleSize([1, 2, 3], 4); // [2,3,1]
          </pre>
          <h4>26. <code>shuffle</code>ï¼šâ€œæ´—ç‰Œâ€ æ•°ç»„</h4>
          <pre class="language-javscript">
            // æ­¤ä»£ç æ®µä½¿ç”¨Fisher-Yatesç®—æ³•éšæœºæ’åºæ•°ç»„çš„å…ƒç´ ã€‚
            const shuffle = ([...arr]) => {
            let m = arr.length;
            while (m) {
            const i = Math.floor(Math.random() * m--);
            [arr[m], arr[i]] = [arr[i], arr[m]];
            }
            return arr;
            };

            const foo = [1, 2, 3];
            shuffle(foo); // [2, 3, 1], foo = [1, 2, 3]
          </pre>
          <h4>27. <code>nest</code>ï¼šæ ¹æ®parent_idç”Ÿæˆæ ‘ç»“æ„ï¼ˆé˜¿é‡Œä¸€é¢çœŸé¢˜ï¼‰</h4>
          <pre class="language-javscript">
            //æ ¹æ®æ¯é¡¹çš„parent_idï¼Œç”Ÿæˆå…·ä½“æ ‘å½¢ç»“æ„çš„å¯¹è±¡ã€‚
            const nest = (items, id = null, link = 'parent_id') =>
            items
            .filter(item => item[link] === id)
            .map(item => ({ ...item, children: nest(items, item.id) }));

            // ç”¨æ³•
            const comments = [
              { id: 1, parent_id: null , name: 'èœå•1'},
              { id: 2, parent_id: 1, name: 'èœå•1-1'},
              { id: 3, parent_id: 1, name: 'èœå•1-2'},
              { id: 4, parent_id: 2 },
              { id: 5, parent_id: 4 }
            ];
            const nestedComments = nest(comments); // [{ id: 1, parent_id: null, children: [...] }]
          </pre>
        </section>
      </div>
      <div class="list">
        <span class="tit">å‡½æ•°</span>
        <section class="con">
          <h4>1. <code>attempt</code>ï¼šæ•è·å‡½æ•°è¿è¡Œå¼‚å¸¸</h4>
          <pre class="language-javscript">
            //è¯¥ä»£ç æ®µæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»“æœæˆ–æ•è·çš„é”™è¯¯å¯¹è±¡ã€‚
            onst attempt = (fn, ...args) => {
              try {
                return fn(...args);
              } catch (e) {
                return e instanceof Error ? e : new Error(e);
              }
            };
            var elements = attempt(function(selector) {
              return document.querySelectorAll(selector);
            }, '>_>');
            if (elements instanceof Error) elements = []; // elements = []
          </pre>
          <h4>2. <code>defer</code>ï¼šæ¨è¿Ÿæ‰§è¡Œ</h4>
          <pre class="language-javscript">
            // æ­¤ä»£ç æ®µå»¶è¿Ÿäº†å‡½æ•°çš„æ‰§è¡Œï¼Œç›´åˆ°æ¸…é™¤äº†å½“å‰è°ƒç”¨å †æ ˆã€‚
            const defer = (fn, ...args) => setTimeout(fn, 1, ...args);

            defer(console.log, 'a'), console.log('b'); // logs 'b' then 'a'
          </pre>
          <h4>3. <code>runPromisesInSeries</code>ï¼šè¿è¡Œå¤šä¸ªPromises</h4>
          <pre class="language-javscript">
            const runPromisesInSeries = ps => ps.reduce((p, next) => p.then(next), Promise.resolve());
            const delay = d => new Promise(r => setTimeout(r, d));

            runPromisesInSeries([() => delay(1000), () => delay(2000)]);
            //ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªPromises ï¼Œæ€»å…±éœ€è¦3ç§’é’Ÿæ‰èƒ½å®Œæˆ
          </pre>
          <h4>4. <code>timeTaken</code>ï¼šè®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´</h4>
          <pre class="language-javscript">
            const timeTaken = callback => {
              console.time('timeTaken');
              const r = callback();
              console.timeEnd('timeTaken');
              return r;
            };

            timeTaken(() => Math.pow(2, 10)); // 1024, (logged): timeTaken: 0.02099609375ms
          </pre>
          <h4>5. <code>createEventHub</code>ï¼šç®€å•çš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼</h4>
          <blockquote>
            <ol>
              <li>ä½¿ç”¨<code>Object.create(null)</code>åˆ›å»ºä¸€ä¸ªç©ºçš„<code>hub</code>å¯¹è±¡ã€‚</li>
              <li><code>emit</code>ï¼Œæ ¹æ®<code>event</code>å‚æ•°è§£æå¤„ç†ç¨‹åºæ•°ç»„ï¼Œç„¶å<code>.forEach()</code>é€šè¿‡ä¼ å…¥æ•°æ®ä½œä¸ºå‚æ•°æ¥è¿è¡Œæ¯ä¸ªå¤„ç†ç¨‹åºã€‚</li>
              <li><code>on</code>ï¼Œä¸ºäº‹ä»¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ˆè‹¥ä¸å­˜åœ¨åˆ™ä¸ºç©ºæ•°ç»„ï¼‰ï¼Œç„¶å<code>.push()</code>å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°è¯¥æ•°ç»„ã€‚</li>
              <li><code>off</code>ï¼Œç”¨<code>.findIndex()</code>åœ¨äº‹ä»¶æ•°ç»„ä¸­æŸ¥æ‰¾å¤„ç†ç¨‹åºçš„ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨<code>.splice()</code>åˆ é™¤ã€‚</li>
            </ol>
          </blockquote>
          <pre class="language-javscript">
            const createEventHub = () => ({
              hub: Object.create(null),
              emit(event, data) {
                (this.hub[event] || []).forEach(handler => handler(data));
              },
              on(event, handler) {
                if (!this.hub[event]) this.hub[event] = [];
                this.hub[event].push(handler);
              },
              off(event, handler) {
                const i = (this.hub[event] || []).findIndex(h => h === handler);
                if (i > -1) this.hub[event].splice(i, 1);
                if (this.hub[event].length === 0) delete this.hub[event];
              }
            });

            // ç”¨æ³•
            const handler = data => console.log(data);
            const hub = createEventHub();
            let increment = 0;

            // è®¢é˜…ï¼Œç›‘å¬ä¸åŒäº‹ä»¶
            hub.on('message', handler);
            hub.on('message', () => console.log('Message event fired'));
            hub.on('increment', () => increment++);

            // å‘å¸ƒï¼šå‘å‡ºäº‹ä»¶ä»¥è°ƒç”¨æ‰€æœ‰è®¢é˜…ç»™å®ƒä»¬çš„å¤„ç†ç¨‹åºï¼Œå¹¶å°†æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒä»¬
            hub.emit('message', 'hello world'); // æ‰“å° 'hello world' å’Œ 'Message event fired'
            hub.emit('message', { hello: 'world' }); // æ‰“å° å¯¹è±¡ å’Œ 'Message event fired'
            hub.emit('increment'); // increment = 1

            // åœæ­¢è®¢é˜…
            hub.off('message', handler);
          </pre>
          <h4>6. <code>memoize</code>ï¼šç¼“å­˜å‡½æ•°</h4>
          <pre class="language-javscript">
            // Vueæºç 
            /**
            * Create a cached version of a pure function.
            */
            export function cached<F: Function> (fn: F): F {
              const cache = Object.create(null)
              return (function cachedFn (str: string) {
                const hit = cache[str]
                return hit || (cache[str] = fn(str))
              }: any)
            }
          </pre>
          <h4>7. <code>once</code>ï¼šåªè°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°</h4>
          <pre class="language-javscript">
            const once = fn => {
            let called = false
            return function () {
              if (!called) {
                called = true
                fn.apply(this, arguments)
              }
            }
          };
          </pre>
        </section>
      </div>
      <div class="list">
        <span class="tit">å¯¹è±¡</span>
        <section class="con">
          <h4>1. <code>dayOfYear</code>ï¼šå½“å‰æ—¥æœŸå¤©æ•°</h4>
          <pre class="language-javscript">
            const dayOfYear = date =>
            Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);

            dayOfYear(new Date()); // 285
          </pre>
          <h4>2. <code>forOwn</code>ï¼šè¿­ä»£å±æ€§å¹¶æ‰§è¡Œå›è°ƒ</h4>
          <pre class="language-javscript">
            const forOwn = (obj, fn) => Object.keys(obj).forEach(key => fn(obj[key], key, obj));

            forOwn({ foo: 'bar', a: 1 }, v => console.log(v)); // 'bar', 1
          </pre>
          <h4>3. <code>Get Time From Date</code>ï¼šè¿”å›å½“å‰24å°æ—¶åˆ¶æ—¶é—´çš„å­—ç¬¦ä¸²</h4>
          <pre class="language-javscript">
            const getColonTimeFromDate = date => date.toTimeString().slice(0, 8);

            getColonTimeFromDate(new Date()); // "08:38:00"
          </pre>
          <h4>4. <code>Get Days Between Dates</code>ï¼šè¿”å›æ—¥æœŸé—´çš„å¤©æ•°</h4>
          <pre class="language-javscript">
            const getDaysDiffBetweenDates = (dateInitial, dateFinal) =>
            (dateFinal - dateInitial) / (1000 * 3600 * 24);

            getDaysDiffBetweenDates(new Date('2019-01-01'), new Date('2019-10-14')); // 286
          </pre>
          <h4>5. <code>is</code>ï¼šæ£€æŸ¥å€¼æ˜¯å¦ä¸ºç‰¹å®šç±»å‹ã€‚</h4>
          <pre class="language-javscript">
            const is = (type, val) => ![, null].includes(val) && val.constructor === type;

            is(Array, [1]); // true
            is(ArrayBuffer, new ArrayBuffer()); // true
            is(Map, new Map()); // true
            is(RegExp, /./g); // true
            is(Set, new Set()); // true
            is(WeakMap, new WeakMap()); // true
            is(WeakSet, new WeakSet()); // true
            is(String, ''); // true
            is(String, new String('')); // true
            is(Number, 1); // true
            is(Number, new Number(1)); // true
            is(Boolean, true); // true
            is(Boolean, new Boolean(true)); // true
          </pre>
          <h4>6. <code>isAfterDate</code>ï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå</h4>
          <pre class="language-javscript">
            const isAfterDate = (dateA, dateB) => dateA > dateB;

            isAfterDate(new Date(2010, 10, 21), new Date(2010, 10, 20)); // true
          </pre>
          <h4>7. <code>isBeforeDate</code>ï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå‰</h4>
          <pre class="language-javscript">
            const isBeforeDate = (dateA, dateB) => dateA < dateB;
            
            isBeforeDate(new Date(2010, 10, 20), new Date(2010, 10, 21)); // true
          </pre>
          <h4>8. <code>isBeforeDate</code>ï¼šè·å–æ˜å¤©çš„å­—ç¬¦ä¸²æ ¼å¼æ—¶é—´</h4>
          <pre class="language-javscript">
            const tomorrow = () => {
              let t = new Date();
              t.setDate(t.getDate() + 1);
              return t.toISOString().split('T')[0];
            };

            tomorrow(); // 2019-10-15 (å¦‚æœæ˜å¤©æ˜¯2019-10-15)
          </pre>
          <h4>9. <code>equals</code>ï¼šå…¨ç­‰åˆ¤æ–­</h4>
          <pre class="language-javscript">
            const equals = (a, b) => {
              if (a === b) return true;
              if (a instanceof Date && b instanceof Date) return a.getTime() === b.getTime();
              if (!a || !b || (typeof a !== 'object' && typeof b !== 'object')) return a === b;
              if (a.prototype !== b.prototype) return false;
              let keys = Object.keys(a);
              if (keys.length !== Object.keys(b).length) return false;
              return keys.every(k => equals(a[k], b[k]));
            };

            // ç”¨æ³• 
            equals({ a: [2, { e: 3 }], b: [4], c: 'foo' }, { a: [2, { e: 3 }], b: [4], c: 'foo' }); // true
          </pre>
        </section>
      </div>
      <div class="list">
        <span class="tit">æ•°å­—</span>
        <section class="con">
          <h4>1. <code>randomIntegerInRange</code>ï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•´æ•°</h4>
          <pre class="language-javscript">
            const randomIntegerInRange = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

            randomIntegerInRange(0, 5); // 3
          </pre>
          <h4>2. <code>randomNumberInRange</code>ï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºå°æ•°</h4>
          <pre class="language-javscript">
            const randomNumberInRange = (min, max) => Math.random() * (max - min) + min;

            randomNumberInRange(2, 10); // 6.0211363285087005
          </pre>
          <h4>3. <code>round</code>ï¼šå››èˆäº”å…¥åˆ°æŒ‡å®šä½æ•°</h4>
          <pre class="language-javscript">
            const round = (n, decimals = 0) => Number(`${Math.round(`${n}e${decimals}`)}e-${decimals}`);

            round(1.005, 2); // 1.01
          </pre>
          <h4>4. <code>sum</code>ï¼šè®¡ç®—æ•°ç»„æˆ–å¤šä¸ªæ•°å­—çš„æ€»å’Œ</h4>
          <pre class="language-javscript">
            const sum = (...arr) => [...arr].reduce((acc, val) => acc + val, 0);

            sum(1, 2, 3, 4); // 10
            sum(...[1, 2, 3, 4]); // 10
          </pre>
          <h4>5. <code>toCurrency</code>ï¼šç®€å•çš„è´§å¸å•ä½è½¬æ¢</h4>
          <pre class="language-javscript">
            const toCurrency = (n, curr, LanguageFormat = undefined) =>
            Intl.NumberFormat(LanguageFormat, { style: 'currency', currency: curr }).format(n);

            toCurrency(123456.789, 'EUR'); // â‚¬123,456.79
            toCurrency(123456.789, 'USD', 'en-us'); // $123,456.79
            toCurrency(123456.789, 'USD', 'fa'); // Û±Û²Û³Ù¬Û´ÛµÛ¶Ù«Û·Û¹
            toCurrency(322342436423.2435, 'JPY'); // Â¥322,342,436,423
          </pre>
        </section>
      </div>
      <div class="list">
        <span class="tit">å­—ç¬¦ä¸²</span>
        <section class="con">
          <h4>1. <code>byteSize</code>ï¼šè¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦</h4>
          <pre class="language-javscript">
            const byteSize = str => new Blob([str]).size;

            byteSize('ğŸ˜€'); // 4
            byteSize('Hello World'); // 11
          </pre>
          <h4>2. <code>capitalize</code>ï¼šé¦–å­—æ¯å¤§å†™</h4>
          <pre class="language-javscript">
            const capitalize = ([first, ...rest]) =>
            first.toUpperCase() + rest.join('');

            capitalize('fooBar'); // 'FooBar'
            capitalize('fooBar', true); // 'Foobar'
          </pre>
          <h4>3. <code>capitalizeEveryWord</code>ï¼šæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</h4>
          <pre class="language-javscript">
            const capitalizeEveryWord = str => str.replace(/\b[a-z]/g, char => char.toUpperCase());

            capitalizeEveryWord('hello world!'); // 'Hello World!'
          </pre>
          <h4>4. <code>decapitalize</code>ï¼šé¦–å­—æ¯å°å†™</h4>
          <pre class="language-javscript">
            const decapitalize = ([first, ...rest]) =>
            first.toLowerCase() + rest.join('')

            decapitalize('FooBar'); // 'fooBar'
            decapitalize('FooBar', true); // 'fooBar'
          </pre>
          <h4>5. <code>luhnCheck</code>ï¼šé“¶è¡Œå¡å·ç æ ¡éªŒï¼ˆluhnç®—æ³•ï¼‰</h4>
          <pre class="language-javscript">
            const luhnCheck = num => {
              let arr = (num + '')
                .split('')
                .reverse()
                .map(x => parseInt(x));
              let lastDigit = arr.splice(0, 1)[0];
              let sum = arr.reduce((acc, val, i) => (i % 2 !== 0 ? acc + val : acc + ((val * 2) % 9) || 9), 0);
              sum += lastDigit;
              return sum % 10 === 0;
            };

            // ç”¨æ³•
            luhnCheck('4485275742308327'); // true
            luhnCheck(6011329933655299); // false
            luhnCheck(123456789); // false
          </pre>
          <h4>6. <code>splitLines</code>ï¼šå°†å¤šè¡Œå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºè¡Œæ•°ç»„ã€‚</h4>
          <pre class="language-javscript">
            //ä½¿ç”¨String.prototype.split()å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¢è¡Œç¬¦å¹¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚

            const splitLines = str => str.split(/\r?\n/);

            splitLines('This\nis a\nmultiline\nstring.\n'); // ['This', 'is a', 'multiline', 'string.' , '']
          </pre>
          <h4>7. <code>stripHTMLTags</code>ï¼š</h4>
          <pre class="language-javscript">
            const stripHTMLTags = str => str.replace(/<[^>]*>/g, '');

            stripHTMLTags('<p><em>lorem</em> <strong>ipsum</strong></p>'); // 'lorem ipsum'
          </pre>
        </section>
      </div>
      <div class="list">
        <span class="tit">æµè§ˆå™¨æ“ä½œåŠå…¶å®ƒ</span>
        <section class="con">
          <h4>1. <code>bottomVisible</code>ï¼šæ£€æŸ¥é¡µé¢åº•éƒ¨æ˜¯å¦å¯è§</h4>
          <pre class="language-javscript">
            const bottomVisible = () =>
            document.documentElement.clientHeight + window.scrollY >=
            (document.documentElement.scrollHeight || document.documentElement.clientHeight);

            bottomVisible(); // true
          </pre>
          <h4>2. <code>Create Directory</code>ï¼šæ£€æŸ¥åˆ›å»ºç›®å½•</h4>
          <pre class="language-javscript">
            //æ­¤ä»£ç æ®µè°ƒç”¨fsæ¨¡å—çš„existsSync()æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™mkdirSync()åˆ›å»ºè¯¥ç›®å½•ã€‚
            const fs = require('fs');
            const createDirIfNotExists = dir => (!fs.existsSync(dir) ? fs.mkdirSync(dir) : undefined);
            createDirIfNotExists('test');
          </pre>
          <h4>3. <code>currentURL</code>ï¼šè¿”å›å½“å‰é“¾æ¥url</h4>
          <pre class="language-javscript">
            const currentURL = () => window.location.href;

            currentURL(); // 'https://juejin.im'
          </pre>
          <h4>4. <code>distance</code>ï¼šè¿”å›ä¸¤ç‚¹é—´çš„è·ç¦»</h4>
          <pre class="language-javscript">
            //è¯¥ä»£ç æ®µé€šè¿‡è®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»æ¥è¿”å›ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚
            const distance = (x0, y0, x1, y1) => Math.hypot(x1 - x0, y1 - y0);

            distance(1, 1, 2, 3); // 2.23606797749979
          </pre>
          <h4>5. <code>elementContains</code>ï¼šæ£€æŸ¥æ˜¯å¦åŒ…å«å­å…ƒç´ </h4>
          <pre class="language-javscript">
            const elementContains = (parent, child) => parent !== child && parent.contains(child);

            elementContains(document.querySelector('head'), document.querySelector('title')); // true
            elementContains(document.querySelector('body'), document.querySelector('body')); // false
          </pre>
          <h4>6. <code>getStyle</code>ï¼šè¿”å›æŒ‡å®šå…ƒç´ çš„ç”Ÿæ•ˆæ ·å¼</h4>
          <pre class="language-javscript">
            const getStyle = (el, ruleName) => getComputedStyle(el)[ruleName];

            getStyle(document.querySelector('p'), 'font-size'); // '16px'
          </pre>
          <h4>7. <code>getType</code>ï¼šè¿”å›å€¼æˆ–å˜é‡çš„ç±»å‹å</h4>
          <pre class="language-javscript">
            const getType = v =>
            v === undefined ? 'undefined' : v === null ? 'null' : v.constructor.name.toLowerCase();

            getType(new Set([1, 2, 3])); // 'set'
            getType([1, 2, 3]); // 'array'
          </pre>
          <h4>8. <code>hasClass</code>ï¼šæ ¡éªŒæŒ‡å®šå…ƒç´ çš„ç±»å</h4>
          <pre class="language-javscript">
            const hasClass = (el, className) => el.classList.contains(className);

            hasClass(document.querySelector('p.special'), 'special'); // true
          </pre>
          <h4>9. <code>hide</code>ï¼šéšè—æ‰€æœ‰çš„æŒ‡å®šæ ‡ç­¾</h4>
          <pre class="language-javscript">
            const hide = (...el) => [...el].forEach(e => (e.style.display = 'none'));

            hide(document.querySelectorAll('img')); // éšè—æ‰€æœ‰<img>æ ‡ç­¾
          </pre>
          <h4>10. <code>httpsRedirect</code>ï¼šHTTP è·³è½¬ HTTPS</h4>
          <pre class="language-javscript">
            const httpsRedirect = () => {
            if (location.protocol !== 'https:') location.replace('https://' + location.href.split('//')[1]);
            };

            httpsRedirect(); // è‹¥åœ¨`http://www.baidu.com`, åˆ™è·³è½¬åˆ°`https://www.baidu.com`
          </pre>

          <h4>11. <code>insertAfter</code>ï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹åæ’å…¥æ–°å…ƒç´ </h4>
          <pre class="language-javscript">
            const insertAfter = (el, htmlString) => el.insertAdjacentHTML('afterend', htmlString);

            insertAfter(document.getElementById('myId'), '<p>after</p>');
          </pre>
          <h4>12. <code>insertBefore</code>ï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æ’å…¥æ–°å…ƒç´ </h4>
          <pre class="language-javscript">
            const insertBefore = (el, htmlString) => el.insertAdjacentHTML('beforebegin', htmlString);

            insertBefore(document.getElementById('myId'), '<p>before</p>'); 
          </pre>
          <h4>13. <code>isBrowser</code>ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºæµè§ˆå™¨ç¯å¢ƒ</h4>
          <pre class="language-javscript">
            const isBrowser = () => ![typeof window, typeof document].includes('undefined');

            isBrowser(); // true (browser)
            isBrowser(); // false (Node)
          </pre>
          <h4>14. <code>isBrowserTab</code>ï¼šæ£€æŸ¥å½“å‰æ ‡ç­¾é¡µæ˜¯å¦æ´»åŠ¨</h4>
          <pre class="language-javscript">
            const isBrowserTabFocused = () => !document.hidden;

            isBrowserTabFocused(); // true
          </pre>
          
          <h4>15. <code>nodeListToArray</code>ï¼šè½¬æ¢nodeListä¸ºæ•°ç»„</h4>
          <pre class="language-javscript">
            const nodeListToArray = nodeList => [...nodeList];

            nodeListToArray(document.childNodes); // [<!DOCTYPE html>, html ]
          </pre>
          <h4>16. <code>Random Hexadecimal Color Code</code>ï¼šéšæœºåå…­è¿›åˆ¶é¢œè‰²</h4>
          <pre class="language-javscript">
            const randomHexColorCode = () => {
              let n = (Math.random() * 0xfffff * 1000000).toString(16);
              return '#' + n.slice(0, 6);
            };

            randomHexColorCode(); // "#e34155"
          </pre>
          <h4>17. <code>scrollToTop</code>ï¼šå¹³æ»‘æ»šåŠ¨è‡³é¡¶éƒ¨</h4>
          <pre class="language-javscript">
            const scrollToTop = () => {
              const c = document.documentElement.scrollTop || document.body.scrollTop;
              if (c > 0) {
                window.requestAnimationFrame(scrollToTop);
                window.scrollTo(0, c - c / 8);
              }
            };

            scrollToTop();
          </pre>
          <h4>18. <code>smoothScroll</code>ï¼šæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ åŒºåŸŸ</h4>
          <pre class="language-javscript">
            const smoothScroll = element =>
              document.querySelector(element).scrollIntoView({
                behavior: 'smooth'
              });
              
            smoothScroll('#fooBar'); 
            smoothScroll('.fooBar'); 
          </pre>
          <h4>19. <code>detectDeviceType</code>ï¼šæ£€æµ‹ç§»åŠ¨/PCè®¾å¤‡</h4>
          <pre class="language-javscript">
            const detectDeviceType = () =>
            /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
              ? 'Mobile'
              : 'Desktop';
          </pre>
          <h4>20. <code>getScrollPosition</code>ï¼šè¿”å›å½“å‰çš„æ»šåŠ¨ä½ç½®</h4>
          <pre class="language-javscript">
            // é»˜è®¤å‚æ•°ä¸ºwindow ï¼ŒpageXOffset(pageYOffset)ä¸ºç¬¬ä¸€é€‰æ‹©ï¼Œæ²¡æœ‰åˆ™ç”¨scrollLeft(scrollTop)
            const getScrollPosition = (el = window) => ({
              x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
              y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
            });

            getScrollPosition(); // {x: 0, y: 200}
          </pre>

          <h4>21. <code>toCurrency</code>ï¼šè·å–ä¸åŒç±»å‹å˜é‡çš„å­—èŠ‚é•¿åº¦</h4>
          <pre class="language-javscript">
            // è¿™ä¸ªçš„å®ç°éå¸¸å·§å¦™ï¼Œåˆ©ç”¨Blobç±»æ–‡ä»¶å¯¹è±¡çš„ç‰¹æ€§ï¼Œè·å–å¯¹è±¡çš„é•¿åº¦ã€‚
            // å¤–åŠ å¤šé‡ä¸‰å…ƒè¿ç®—ç¬¦ã€‚
            const size = val =>
              Array.isArray(val)
                ? val.length
                : val && typeof val === 'object'
                ? val.size || val.length || Object.keys(val).length
                : typeof val === 'string'
                ? new Blob([val]).size
                : 0;

            size([1, 2, 3, 4, 5]); // 5
            size('size'); // 4
            size({ one: 1, two: 2, three: 3 }); // 3
          </pre>
          <h4>22. <code>escapeHTML</code>ï¼šè½¬ä¹‰HTML</h4>
          <pre class="language-javscript">
            // ç”¨æ¥é˜²XSSæ”»å‡»å•¦ã€‚
            const escapeHTML = str =>
              str.replace(
                /[&<>'"]/g,
                tag =>
                  ({
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    "'": '&#39;',
                    '"': '&quot;'
                  }[tag] || tag)
              );

            escapeHTML('<a href="#">Me & you</a>'); // '&lt;a href=&quot;#&quot;&gt;Me &amp; you&lt;/a&gt;'
          </pre>
        </section>
      </div>
    </div>
  </div>
  <script src="../js/jquery.min.js"></script>
  <script src="../js/libs/jquery.syntaxhighlighter.js"></script>
  <script src="../js/libs/sdmenu.js"></script>
  <script>
    window.onload = function () {
      jMenu = new SDMenu("J_menu");
      jMenu.init();
    }
    $(function () {
      $.SyntaxHighlighter.init();
    })
  </script>
</body>

</html>